# Operating System

## Charpter 03 프로세스와 스레드

### 1. 프로세스의 관리

#### 프로세스 구조

![프로세스_계층_구조](https://user-images.githubusercontent.com/38815618/85948239-b1edd280-b98a-11ea-975b-c3d9744a23a4.PNG)

- 프로세스는 실행 중에 프로세스 생성 시스템 호출을 이용하여 새로운 프로세스를 생성
- 프로세스 생성 순서를 저장하고 부모-자식 관계를 유지하여 계층적으로 생성
- 생성하는 프로세스는 부모 프로세스, 생성되는 프로세스는 자식 프로세스 또는 서브 프로세스라고 부름

#### 프로세스 생성 과정

1. 새로운 프로세스에 프로세스 식별자 할당
2. 프로세스의 모든 구성 요소를 포함할 수 있는 메모리(주소 공간)와 PCB 공간을 할당
3. PCB 초기화
4. 해당 큐에 삽입

- 프로세스를 생성할 때 일부 초기화 데이터를 부모 프로세스에서 자식 프로세스로 전달하기도 함

#### 프로세스 종료

- 프로세스에 할당된 작업이 더 이상 없는 경우, 할당된 자원을 초과하여 사용할 경우, 특정 프로세스 종료 명령어를 실행할 경우 등에는 프로세스를 종료시켜 OS에 프로세스 삭제를 요청
- 부모 프로세스만이 자식 프로세스를 중단할 수 있음
- 자식 프로세스는 종료할 때 자신의 식별자를 부모 프로세스에 전달
- 보통 부모 프로세스를 종료하면 자식 프로세스는 필요치 않으므로 OS가 자식 프로세스도 종료(연속 종료)

#### 프로세스 제거

- 프로세스 제거 시 사용하던 자원은 시스템에 돌려주고,
해당 프로세스는 시스템 리스트나 테이블에서 사라져 PCB를 회수한 후 디스크에 저장

#### 프로세스의 중단과 재시작

- 시스템의 유휴 시간 문제는 프로세스 중단 상태를 이용하여 해결
- 운영체제는 새로운 프로세스를 생성하여 실행하거나 실행 중인 프로세스를 중단했다가 다시 실행하여 사용할 수 있으며, 후자의 방법을 이용하면 시스템 전체의 부하를 증기시키지 않으면서 프로세스에 서비스를 제공할 수 있음
- 중단 상태를 추가하면 특정 이벤트의 발생을 기다리면서 대기 상태가 되어 해당 이벤트가 발생할 때 즉시 실행 상태로 바꿀 수 있는 이점이 있음
- 프로세스를 중단한 원인을 제거하여 다시 실행하는 것을 재시작이라고 함
- 프로세스 중단과 재시작은 시스템 부하를 조절하는 데 상당히 중요하며, 다음 상황에서 주로 발생
  - 시스템에 장애가 발생하면 실행 중인 프로세스는 잠시 중단했다가 시스템이 기능을 회복할 때 다시 재시작
  - 프로세스에 의심스러운 부분이 있으면 실행 중인 프로세스를 중단하여 확인한 후 재시작 또는 종료
  - 처리할 작업이 너무 많아 시스템에 부담이 되면 프로세스 몇 개를 중단했다가 시스템이 정상 상태로 다시 돌아왔을 때 재시작
- 대다수 시스템은 프로세스를 실행하기 전에 자원을 할당받고 실행을 시작하지만, 다중 프로그래밍 환경에서는 지원의 이용률과 시스템 효율을 높이려고 자원을 동적으로 할당
  - 이때 자원을 할당받으려고 기다리는 상태가 대기
  - 할당받은 자원을 기다리는 상태가 중단
- 중단된 상태는 프로세스가 보조 메모리에 있고 이벤트를 대기 중인 상태
- 중단 상태는 프로세스가 보조 메모리에 있지만 즉시 메인 메모리로 적재하여 실행할 수 있는 상태
